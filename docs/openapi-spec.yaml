openapi: 3.0.3
info:
  title: StormCom E-commerce API
  description: >-
    Comprehensive REST API for StormCom multi-tenant SaaS e-commerce platform. This API provides complete functionality
    for authentication, organization management, store operations, product catalog, customer management, orders, and
    reviews. Built with Next.js 16, TypeScript, Prisma ORM, and NextAuth for enterprise-grade security and scalability.
  version: 1.0.0
  contact:
    name: CodeStorm Hub
    email: salman.reza.232@northsouth.edu
    url: https://github.com/CodeStorm-Hub/stormcomui
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
  - url: http://localhost:3000/api
    description: Development server
  - url: https://stormcom.vercel.app/api
    description: Production server
tags:
  - name: Authentication
    description: User authentication and registration endpoints
  - name: Organizations
    description: Organization management for multi-tenancy
  - name: Stores
    description: Store operations within organizations
  - name: Products
    description: Product catalog management with variants
  - name: Categories
    description: Product category management
  - name: Brands
    description: Brand management for products
  - name: Customers
    description: Customer relationship management
  - name: Orders
    description: Order processing and management
  - name: Reviews
    description: Product review and rating system
paths:
  /auth/login:
    post:
      tags:
        - Authentication
      summary: User Login
      description: Authenticate a user with email and password. Returns JWT token for subsequent requests.
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: test@example.com
                password:
                  type: string
                  format: password
                  example: Test123!@#
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT Bearer token
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /auth/signup:
    post:
      tags:
        - Authentication
      summary: User Registration
      description: Register a new user account
      operationId: signup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
                  minLength: 8
                name:
                  type: string
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '409':
          description: Email already exists
  /organizations:
    get:
      tags:
        - Organizations
      summary: List Organizations
      description: Retrieve paginated list of organizations for the authenticated user
      operationId: listOrganizations
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  organizations:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
    post:
      tags:
        - Organizations
      summary: Create Organization
      description: Create a new organization
      operationId: createOrganization
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - slug
              properties:
                name:
                  type: string
                  example: Tech Innovations Inc
                slug:
                  type: string
                  pattern: ^[a-z0-9-]+$
                  example: tech-innovations
                description:
                  type: string
                  example: Leading tech innovation company
      responses:
        '201':
          description: Organization created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '409':
          description: Organization slug already exists
  /stores:
    get:
      tags:
        - Stores
      summary: List Stores
      description: Retrieve paginated list of stores accessible to the authenticated user
      operationId: listStores
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  stores:
                    type: array
                    items:
                      $ref: '#/components/schemas/Store'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /products:
    get:
      tags:
        - Products
      summary: List Products
      description: Retrieve paginated list of products for a specific store with optional filtering
      operationId: listProducts
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: search
          in: query
          description: Search products by name or description
          required: false
          schema:
            type: string
            example: MacBook
        - name: status
          in: query
          description: Filter by product status
          required: false
          schema:
            type: string
            enum:
              - ACTIVE
              - DRAFT
              - ARCHIVED
            example: ACTIVE
        - name: categoryId
          in: query
          description: Filter by category ID
          required: false
          schema:
            type: string
        - name: brandId
          in: query
          description: Filter by brand ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  products:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
  /categories:
    get:
      tags:
        - Categories
      summary: List Categories
      description: Retrieve all categories for a specific store
      operationId: listCategories
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  categories:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /brands:
    get:
      tags:
        - Brands
      summary: List Brands
      description: Retrieve all brands for a specific store
      operationId: listBrands
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  brands:
                    type: array
                    items:
                      $ref: '#/components/schemas/Brand'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /customers:
    get:
      tags:
        - Customers
      summary: List Customers
      description: Retrieve paginated list of customers for a specific store
      operationId: listCustomers
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: search
          in: query
          description: Search customers by name or email
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  customers:
                    type: array
                    items:
                      $ref: '#/components/schemas/Customer'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /orders:
    get:
      tags:
        - Orders
      summary: List Orders
      description: Retrieve paginated list of orders for a specific store
      operationId: listOrders
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: status
          in: query
          description: Filter by order status
          required: false
          schema:
            type: string
            enum:
              - PENDING
              - PAID
              - PROCESSING
              - SHIPPED
              - DELIVERED
              - CANCELLED
              - REFUNDED
            example: DELIVERED
        - name: customerId
          in: query
          description: Filter by customer ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  orders:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
  /reviews:
    get:
      tags:
        - Reviews
      summary: List Reviews
      description: Retrieve paginated list of product reviews for a specific store
      operationId: listReviews
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/StoreIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: approved
          in: query
          description: Filter by approval status
          required: false
          schema:
            type: boolean
            example: true
        - name: productId
          in: query
          description: Filter by product ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  reviews:
                    type: array
                    items:
                      $ref: '#/components/schemas/Review'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from /auth/login endpoint
  parameters:
    PageParam:
      name: page
      in: query
      description: Page number for pagination
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
        example: 1
    LimitParam:
      name: limit
      in: query
      description: Number of items per page
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
        example: 10
    StoreIdParam:
      name: storeId
      in: query
      description: Store ID for multi-tenant isolation
      required: true
      schema:
        type: string
        example: cmijjxiag000ifmloysnyfc3x
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          description: Unique user identifier
        email:
          type: string
          format: email
        name:
          type: string
        role:
          type: string
          enum:
            - ADMIN
            - SELLER
            - CUSTOMER
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Organization:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
          pattern: ^[a-z0-9-]+$
        description:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Store:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        organizationId:
          type: string
        plan:
          type: string
          enum:
            - FREE
            - BASIC
            - PRO
            - ENTERPRISE
        status:
          type: string
          enum:
            - ACTIVE
            - SUSPENDED
            - ARCHIVED
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Product:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        price:
          type: number
          format: decimal
          description: Product price in store currency
        compareAtPrice:
          type: number
          format: decimal
          nullable: true
        costPerItem:
          type: number
          format: decimal
          nullable: true
        status:
          type: string
          enum:
            - ACTIVE
            - DRAFT
            - ARCHIVED
        inventory:
          type: integer
          description: Total available inventory
        sku:
          type: string
          nullable: true
        barcode:
          type: string
          nullable: true
        categoryId:
          type: string
          nullable: true
        brandId:
          type: string
          nullable: true
        storeId:
          type: string
        images:
          type: array
          items:
            type: string
            format: uri
        variants:
          type: array
          items:
            $ref: '#/components/schemas/ProductVariant'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProductVariant:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        price:
          type: number
          format: decimal
        compareAtPrice:
          type: number
          format: decimal
          nullable: true
        sku:
          type: string
          nullable: true
        inventory:
          type: integer
        options:
          type: string
          description: JSON string containing variant options (e.g., color, size)
    Category:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        storeId:
          type: string
        createdAt:
          type: string
          format: date-time
    Brand:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        logo:
          type: string
          format: uri
          nullable: true
        storeId:
          type: string
        createdAt:
          type: string
          format: date-time
    Customer:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
          format: email
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
          nullable: true
        storeId:
          type: string
        totalOrders:
          type: integer
          description: Total number of orders placed
        totalSpent:
          type: number
          format: decimal
          description: Total amount spent
        createdAt:
          type: string
          format: date-time
    Order:
      type: object
      properties:
        id:
          type: string
        orderNumber:
          type: string
          description: Human-readable order number
        status:
          type: string
          enum:
            - PENDING
            - PAID
            - PROCESSING
            - SHIPPED
            - DELIVERED
            - CANCELLED
            - REFUNDED
        customerId:
          type: string
        storeId:
          type: string
        subtotal:
          type: number
          format: decimal
        tax:
          type: number
          format: decimal
        shipping:
          type: number
          format: decimal
        total:
          type: number
          format: decimal
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
        shippingAddress:
          type: string
          nullable: true
        billingAddress:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    OrderItem:
      type: object
      properties:
        id:
          type: string
        productId:
          type: string
        variantId:
          type: string
          nullable: true
        quantity:
          type: integer
          minimum: 1
        price:
          type: number
          format: decimal
        total:
          type: number
          format: decimal
    Review:
      type: object
      properties:
        id:
          type: string
        productId:
          type: string
        customerId:
          type: string
        storeId:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        title:
          type: string
        comment:
          type: string
          nullable: true
        isVerifiedPurchase:
          type: boolean
        isApproved:
          type: boolean
        approvedAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
        limit:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
          description: Total number of pages
    Error:
      type: object
      properties:
        error:
          type: string
          description: Error message
        code:
          type: string
          description: Error code
        details:
          type: object
          description: Additional error details
  responses:
    UnauthorizedError:
      description: Authentication required or invalid token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: Unauthorized
            code: AUTH_REQUIRED
    ForbiddenError:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: Forbidden
            code: INSUFFICIENT_PERMISSIONS
    BadRequestError:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: Bad Request
            code: INVALID_PARAMETERS
    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: Not Found
            code: RESOURCE_NOT_FOUND
